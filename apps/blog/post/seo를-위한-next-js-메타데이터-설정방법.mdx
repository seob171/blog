---
title: seoë¥¼ ìœ„í•œ next js ë©”íƒ€ë°ì´í„° ì„¤ì •ë°©ë²•
summary: next js 14 ë²„ì „(app router)ì—ì„œ ë©”íƒ€ë°ì´í„° ì„¤ì • ë° ë™ì ìœ¼ë¡œ opengraph ì´ë¯¸ì§€ ì—°ë™í•˜ê¸°
publishedAt: 2024.08.12
tags: ["Next.js","seo"]
---

Next.jsë¥¼ ì‚¬ìš©í•˜ëŠ” ëŒ€í‘œì ì¸ ì´ìœ ì¸ **SEO**ë¥¼ ë¸”ë¡œê·¸ì— ì ìš©í•˜ë©´ì„œ ê²ªì€ ~~ì‚½ì§ˆê¸°~~ë¥¼ ê¸°ë¡ ë° ê³µìœ í•˜ê³ ì í¬ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•œë‹¤.

> What is SEO?
> 
> SEO stands for Search Engine Optimization. The goal of SEO is to **create a strategy that will increase your rankings position in search engine results**. The higher the ranking, the more organic traffic to your site, which ultimately leads to more business for you!

---

### ë©”íƒ€ë°ì´í„° ì„¤ì •

next js page router ì—ì„œëŠ” next/headì˜ Head íƒœê·¸ë‚´ì— ì •ì˜í•´ì„œ ì„¤ì •í•´ì•¼ í–ˆì§€ë§Œ **app router**ì—ì„œëŠ” **layout** ë˜ëŠ” **page**ì—ì„œ `metadataë‚˜` `generateMetadata`ë¥¼ export í•˜ë©´ëœë‹¤.

```typescript title="ì •ì  ë©”íƒ€ë°ì´í„° ìƒì„±"
// layout.tsx | page.tsx

import type { Metadata } from 'next'
 
export const metadata: Metadata = {
  title: '...',
  description: '...',
}
 
export default function Page() {}
```

```typescript title="ë™ì  ë©”íƒ€ë°ì´í„° ìƒì„±"
// layout.tsx | page.tsx

import type { Metadata, ResolvingMetadata } from 'next'
 
type Props = {
  params: { id: string }
  searchParams: { [key: string]: string | string[] | undefined }
}
 
export async function generateMetadata(
  { params, searchParams }: Props,
  parent: ResolvingMetadata
): Promise<Metadata> {
  // read route params
  const id = params.id
 
  // fetch data
  const product = await fetch(`https://.../${id}`).then((res) => res.json())
 
  // optionally access and extend (rather than replace) parent metadata
  const previousImages = (await parent).openGraph?.images || []
 
  return {
    title: product.title,
    openGraph: {
      images: ['/some-specific-page-image.jpg', ...previousImages],
    },
  }
}
 
export default function Page({ params, searchParams }: Props) {}
```

ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ê²½ìš° argsë¡œ `params`, `searchParams`, `parent`(**ë¶€ëª¨ì˜ ë©”íƒ€ë°ì´í„°**)ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

---

### faviconê³¼ opengraph image ì—°ë™

create next app ëª…ë ¹ì–´ë¡œ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ë©´ vercelì˜ ë¡œê³ ê°€ ê¸°ë³¸ íŒŒë¹„ì½˜ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆë‹¤. ìš°ì„  íŒŒë¹„ì½˜ì„ ë³€ê²½í•˜ë ¤ë©´ íŒŒë¹„ì½˜ì´ ìˆì–´ì•¼ í•˜ëŠ”ë°, ë‚˜ëŠ” [favicon.io](https://favicon.io/) ì—¬ê¸°ì„œ íŒŒë¹„ì½˜ì„ ìƒì„±í–ˆë‹¤.

ì ë‹¹í•œ íŒŒë¹„ì½˜ì„ ë§Œë“¤ê³  ë‹¤ìš´ë¡œë“œë¥¼ í•˜ë©´ android, apple, favicon ì´ë¦„ë¶€í„° png, ico í™•ì¥ìëª… íŒŒì¼, site.webmanifest ë“± ì—¬ëŸ¬ íŒŒì¼ì´ í•¨ê»˜ìƒê¸´ë‹¤.

ìš°ì„  íŒŒë¹„ì½˜ì„ ë³€ê²½í•´ë³´ì

ê¸°ë³¸ì ìœ¼ë¡œ `app` ë””ë ‰í† ë¦¬ ì•ˆì— favicon.ico ë¼ëŠ” íŒŒì¼ì´ ìˆì„í…ë°, í•´ë‹¹ íŒŒì¼ì„ ìƒì„±í•œ favicon.icoë¡œ êµì²´í•´ë„ ë˜ì§€ë§Œ, metadataë¡œ ì „ë‹¬í•´ë„ íŒŒë¹„ì½˜ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.

ë‚˜ëŠ” /public/favicon í•˜ìœ„ë¡œ ê´€ë ¨ íŒŒì¼ì„ ëª¨ë‘ ë„£ì–´ì£¼ê³  ë°°ì—´ í˜•íƒœë¡œ ë§Œë“¤ì–´ì„œ layoutì˜ ë©”íƒ€ë°ì´í„° > icons ë¡œ ë„£ì–´ì¤¬ë‹¤.

```typescript
// /constant/metadata.ts
export const METADATA_ICONS: Metadata["icons"] = [
    {
        url: "/favicon/favicon-16.png",
        sizes: "16x16",
        type: "image/png",
    },
    {
        ...
    },
]

// /app/layout.tsx
export const metadata: Metadata = {
    ...DEFAULT_META,
    icons: METADATA_ICONS,
};
```

ì—¬ê¸°ê¹Œì§€ ì ìš©í•˜ë©´ íŒŒë¹„ì½˜ ì•„ì´ì½˜ì´ ë³€ê²½ë˜ì–´ìˆë‹¤.
<img src="/assets/íŒŒë¹„ì½˜-ì ìš©.png" width="300px" height="auto" alt="open api key ì €ì¥ ì´ë¯¸ì§€"/>

ì´ì œ opengraphë¥¼ ì ìš©í•´ë³´ì. ë§Œì•½ opengraph ì´ë¯¸ì§€ê°€ ìˆë‹¤ë©´ ì•„ë˜ì²˜ëŸ¼ url ê²½ë¡œë¡œ metadataì—ì„œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

```typescript title="ë©”íƒ€ë°ì´í„° opengraph ì´ë¯¸ì§€ ì„¤ì • ë°©ë²•"
export const metadata: Metadata = {
    openGraph: {
        images: [
            {
                url: "/public/opengraph-image.png",
                alt: "...",
                type: "image/png",
                width: 000,
                height: 000,
            },
        ],
    },
};
```

ê·¸ëŸ¬ë‚˜ ë‚˜ëŠ” opengraph ì´ë¯¸ì§€ê°€ ì—†ì–´ì„œ next.jsê°€ ì œê³µí•˜ëŠ” ë™ì ìœ¼ë¡œ opengraph, twitter card ë“± ì†Œì…œ ë¯¸ë””ì–´ ì´ë¯¸ì§€ ìƒì„±ìì¸ [ImageResponse](https://nextjs.org/docs/app/api-reference/functions/image-response) ë¥¼ ì‚¬ìš©í•´ì„œ opengraph ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ê¸°ë¡œ í–ˆë‹¤.

14ë²„ì „ ì´ì „ì—ëŠ” `next/server`ì—ì„œ import í•  ìˆ˜ ìˆì—ˆê³ , 14ë²„ì „ë¶€í„´ `next/og` ì—ì„œ import í•  ìˆ˜ ìˆë‹¤.

ì˜ˆì‹œëŠ” [ì—¬ê¸°](https://nextjs.org/docs/app/api-reference/file-conventions/metadata/opengraph-image) ë‚˜ì™€ìˆë‹¤. opengraphë¥¼ ì‚¬ìš©í•  ê²½ë¡œì— `opengraph-image.tsx`ë¡œ ë§Œë“¤ë©´ ëœë‹¤.

ê·¸ëŸ°ë° ë‚˜ëŠ” rootì— opengraph-image.tsxë¥¼ ë§Œë“¤ì—ˆëŠ”ë°, í•˜ìœ„ routesì—ëŠ” ì ìš©ì´ ì•ˆëë‹¤. ê·¸ë˜ì„œ ì§ì ‘ ê²½ë¡œë¥¼ ë„£ì–´ì£¼ê¸° ìœ„í•´ [vercel ë¬¸ì„œ](https://vercel.com/docs/functions/og-image-generation)ì—ì„œ ì œê³µí•˜ëŠ” í˜•íƒœì¸ api routesë¡œ ë§Œë“¤ê¸°ë¡œ í–ˆë‹¤.

ë°©ë²•ì€ opengraph-image.tsxë¡œ ë§Œë“œëŠ”ê±°ë‘ ê±°ì˜ ë™ì¼í•œë°, ì°¨ì´ì ì€ next.jsì—ì„œ ì œê³µí•˜ëŠ” api routesë¥¼ ì‚¬ìš©í•´ì„œ ë§Œë“œëŠ” ì ì´ ë‹¤ë¥´ë‹¤.

```typescript
// /api/og/route.tsx

import { ImageResponse } from 'next/og';
// App router includes @vercel/og.
// No need to install it.
 
export async function GET() {
  return new ImageResponse(
    (
      <div
        style={{
          fontSize: 40,
          color: 'black',
          background: 'white',
          width: '100%',
          height: '100%',
          padding: '50px 200px',
          textAlign: 'center',
          justifyContent: 'center',
          alignItems: 'center',
        }}
      >
        ğŸ‘‹ Hello
      </div>
    ),
    {
      width: 1200,
      height: 630,
    },
  );
}
```

ì´ë ‡ê²Œ êµ¬í˜„í•œ api ê²½ë¡œë¥¼ ë©”íƒ€ë°ì´í„°ì˜ ì´ë¯¸ì§€ ê²½ë¡œë¡œ ì„¤ì •í•˜ë©´ ëœë‹¤.

```typescript
const metadata: Metadata = {
    ...
    openGraph: {
        images: [
            {
                url: "/api/og",
                alt: "Shimyuseob's blog og image",
                type: "image/png",
                width: 1200,
                height: 630,
            },
        ],
        ...
```

ë‚´ ë¸”ë¡œê·¸ë¥¼ ì˜ˆì‹œë¡œ ë³´ë©´ https://www.shimyuseob.xyz/api/og ê²½ë¡œì— opengraph ì´ë¯¸ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ogê°€ ì˜ ì„¤ì •ëëŠ”ì§€ëŠ” headì˜ og:image ë©”íƒ€íƒœê·¸ë¥¼ ë³´ê±°ë‚˜, https://www.opengraph.xyz/ ì´ê³³ì—ì„œë„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

SEOë¥¼ ë‹¤ ì„¤ì •í•˜ë©´ [êµ¬ê¸€ ì„œì¹˜ì½˜ì†”](https://search.google.com/search-console/about)ì—ì„œ ìƒ‰ì¸ìƒì„±ì„ ìš”ì²­í•˜ê±°ë‚˜ í™•ì¸í•  ìˆ˜ ìˆë‹¤.


### JSON-LD

[ë©”íƒ€ë°ì´í„° ë¬¸ì„œ](https://nextjs.org/docs/app/building-your-application/optimizing/metadata#json-ld)ë¥¼ ë³´ë©´ JSON-LD ì„¤ì •ë„ ë‚˜ì™€ìˆë‹¤. 

> JSON-LDëŠ” ê²€ìƒ‰ ì—”ì§„ì´ ì½˜í…ì¸ ë¥¼ ì´í•´í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°í™”ëœ ë°ì´í„° í˜•ì‹

ì¸ë°, íšŒì‚¬ í”„ë¡œì íŠ¸ì—” ì„¤ì •í•´ë’€ì§€ë§Œ ë¸”ë¡œê·¸ì—ëŠ” JSON-LDëŠ” ì„¤ì •í•˜ì§€ ì•Šì•˜ë‹¤.

ë‚˜ì¤‘ì— í¬ìŠ¤íŠ¸ë„ ë§ì•„ì§€ê³ , ìƒ‰ì¸ì´ ì˜ ì•ˆë˜ëŠ” ê²ƒ ê°™ìœ¼ë©´ ì¶”ê°€í•´ë´ë„ ì¢‹ì„ ê²ƒ ê°™ë‹¤.
